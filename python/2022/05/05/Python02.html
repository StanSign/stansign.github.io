<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<h1 id="typing">Typing</h1>

<p>Typing 모듈은 파이썬에서 지원하는 타입 힌팅(Type Hinting) 모듈입니다. Type Checking도 아니고 Hinting이라니, 참 요상하죠..? 파이썬이 이런 모듈을 지원하는 것은 파이썬의 독특한 특징이 그 이유입니다.</p>

<h2 id="왜-typing-모듈이-필요할까">왜 Typing 모듈이 필요할까?</h2>

<p>파이썬은 동적 프로그래밍 언어입니다. 동적 프로그래밍 언어는 컴파일 타임에  타입을 정하는 것이 아니라, 프로그램 실행 중에 타입이 결정됩니다. 그런데 파이썬은 여기서 더 나아가서 실행 중에도 오브젝트(변수)의 타입을 자유롭게 변경할 수 있습니다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="nf">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="c1"># int
</span><span class="n">a</span> <span class="o">=</span> <span class="s">"1"</span>
<span class="nf">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="c1"># str
</span></code></pre></div></div>

<p>이렇게 파이썬은 타입에 대해 굉장히 유한 것을 볼 수 있습니다. 이런 파이썬의 특징 덕분에 파이썬을 이용하여 코드를 짤 때 프로그래머는 에러를 훨씬 덜 보게 되고 빠른 개발이 가능해집니다. 하지만 이런 자유로움은 당연히 코드가 길어지고 프로젝트가 커질 수록 버그를 일으킬 확률을 높이는 주범이 됩니다.</p>

<p>그래서 파이썬은 Typing 모듈을 사용하기로 하였습니다. Typing 모듈은 타입을 검사(체킹)하는 것이 아니라 개발자가 코드를 읽기 편하고 PyLint와 같은 도구가 활용할 수 있도록 객체들에 정보를 추가해주는 모듈입니다.</p>

<h2 id="어떻게-쓰죠">어떻게 쓰죠?</h2>

<p>기본적인 변수형에 사용하기 위해서는 <code class="language-plaintext highlighter-rouge">변수이름: 타입</code>과 같이 사용할 수 있습니다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">num</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">string</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">"Hello World"</span>
<span class="n">letters</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="s">"A"</span><span class="p">,</span> <span class="s">"B"</span><span class="p">,</span> <span class="s">"C"</span><span class="p">]</span>
<span class="n">student</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"name"</span><span class="p">:</span> <span class="s">"Chris"</span><span class="p">,</span>
  <span class="s">"age"</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
  <span class="s">"phone"</span><span class="p">:</span> <span class="s">"01012345678"</span>
<span class="p">}</span>
</code></pre></div></div>

<p>함수에도 <code class="language-plaintext highlighter-rouge">def 함수이름(필수인자: 타입, 선택인자: 타입 =  기본값) -&gt; 반환타입:</code> 과 같이 사용할 수 있습니다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">arg_optional</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">"A"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
  <span class="k">return</span> <span class="s">"B"</span>
</code></pre></div></div>

<p>이렇게 보니 사용법은 Swift의 기본 문법과 똑같네요.. 사용하는데 어려움은 없을 것 같습니다.</p>

<h2 id="어떤-타입들이-있나요">어떤 타입들이 있나요?</h2>

<p>유용하게 사용할 수 있는 타입들과 사용 예시를 간단하게 쭉 살펴보겠습니다.</p>

<h3 id="내장-자료-구조">내장 자료 구조</h3>

<h4 id="list">List</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">typing</span> <span class="kn">import</span> <span class="n">List</span>
<span class="n">letters</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s">"A"</span><span class="p">,</span> <span class="s">"B"</span><span class="p">,</span> <span class="s">"C"</span><span class="p">]</span>
</code></pre></div></div>

<h4 id="dict">Dict</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">typing</span> <span class="kn">import</span> <span class="n">Dict</span>
<span class="n">TimeZone</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"KR"</span><span class="p">:</span> <span class="s">"South Korea"</span><span class="p">,</span>
  <span class="s">"CN"</span><span class="p">:</span> <span class="s">"China"</span><span class="p">,</span>
  <span class="s">"US"</span><span class="p">:</span> <span class="s">"United States"</span><span class="p">,</span>
  <span class="s">"JP"</span><span class="p">:</span> <span class="s">"Japan"</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="tuple">Tuple</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">typing</span> <span class="kn">import</span> <span class="n">Tuple</span>
<span class="n">student</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="s">"Chris"</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="set">Set</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">typing</span> <span class="kn">import</span> <span class="n">Set</span>
<span class="n">letters</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s">"A"</span><span class="p">,</span> <span class="s">"B"</span><span class="p">,</span> <span class="s">"C"</span><span class="p">}</span>
</code></pre></div></div>

<h3 id="final">Final</h3>

<p>Final은 더이상 값의 변경이 없는 경우 사용하면 편리합니다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">typing</span> <span class="kn">import</span> <span class="n">Final</span>
<span class="n">DEFAULT_TIMEOUT_SECONDS</span><span class="p">:</span> <span class="n">Final</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
</code></pre></div></div>

<h3 id="union">Union</h3>

<p>하나의 객체에 여러 타입의 값을 할당하고 싶을 떄 사용하면 편리합니다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">typing</span> <span class="kn">import</span> <span class="n">Union</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">num</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
  <span class="k">return</span> <span class="nf">int</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="optional">Optional</h3>

<p>Swift의 optional과 동일합니다. nil 값을 가질 수 있습니다. 다만 ? 대신 Optional[]로 표기하고 nil이 아니라 None을 사용합니다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
  <span class="k">if</span> <span class="n">params</span><span class="p">:</span>
    <span class="k">return</span> <span class="bp">True</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="k">return</span> <span class="bp">False</span>
</code></pre></div></div>

<h3 id="callable">Callable</h3>

<p>Callable은 함수입니다. 함수를 변수에 저장하거나 인자로 사용할 때, 혹은 반환값으로 사용할 때 Callable 타입을 사용하면 편하게 사용할 수 있습니다.</p>

<p>형식은 <code class="language-plaintext highlighter-rouge">함수이름: Callable[[인자타입, 인자타입, ...], 반환타입]</code>과 같이 사용할 수 있습니다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">typing</span> <span class="kn">import</span> <span class="n">Callable</span>
<span class="k">def</span> <span class="nf">repeat</span><span class="p">(</span><span class="n">greet</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">],</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">times</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
  <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">times</span><span class="p">):</span>
    <span class="nf">print</span><span class="p">(</span><span class="nf">greet</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">greet</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">name</span><span class="p">:</span> <span class="sa">f</span><span class="s">"Hi, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s">!"</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nf">repeat</span><span class="p">(</span><span class="n">greet</span><span class="p">,</span> <span class="s">"John"</span><span class="p">)</span>
<span class="n">Hi</span><span class="p">,</span> <span class="n">John</span><span class="err">!</span>
<span class="n">Hi</span><span class="p">,</span> <span class="n">John</span><span class="err">!</span>
</code></pre></div></div>

<h3 id="타입-추상화-duck-type">타입 추상화 (duck-type)</h3>

<h4 id="iterable">Iterable</h4>

<p>모든 iterable들에 적용할 수 있습니다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">typing</span> <span class="kn">import</span> <span class="n">Iterable</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">ints</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
  <span class="k">return</span> <span class="p">[</span><span class="nf">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ints</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="nf">print</span><span class="p">(</span><span class="nf">foo</span><span class="p">(</span><span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))</span>
<span class="p">[</span><span class="s">'1'</span><span class="p">,</span> <span class="s">'2'</span><span class="p">]</span>
</code></pre></div></div>

<h4 id="mapping">Mapping</h4>

<p>Dict 형 Iterable입니다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">typing</span> <span class="kn">import</span> <span class="n">Mapping</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">my_mapping</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
  <span class="n">my_mapping</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="s">"maybe"</span>
  <span class="k">return</span> <span class="nf">list</span><span class="p">(</span><span class="n">my_mapping</span><span class="p">.</span><span class="nf">items</span><span class="p">())</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="nf">print</span><span class="p">(</span><span class="nf">foo</span><span class="p">({</span><span class="mi">3</span><span class="p">:</span> <span class="s">'yes'</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="s">'no'</span><span class="p">}))</span>
<span class="p">[(</span><span class="mi">3</span><span class="p">,</span> <span class="s">'yes'</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">'no'</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s">'maybe'</span><span class="p">)]</span>
</code></pre></div></div>

<h4 id="mutable-mapping">Mutable Mapping</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">typing</span> <span class="kn">import</span> <span class="n">MutableMapping</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">my_mapping</span><span class="p">:</span> <span class="n">MutableMapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
  <span class="n">my_mapping</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="s">"maybe"</span>
  <span class="k">return</span> <span class="nf">set</span><span class="p">(</span><span class="n">my_mapping</span><span class="p">.</span><span class="nf">items</span><span class="p">())</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="nf">print</span><span class="p">(</span><span class="nf">foo</span><span class="p">({</span><span class="mi">3</span><span class="p">:</span> <span class="s">'yes'</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="s">'no'</span><span class="p">}))</span>
<span class="p">{(</span><span class="mi">3</span><span class="p">,</span> <span class="s">'yes'</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">'no'</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s">'maybe'</span><span class="p">)}</span>
</code></pre></div></div>

<h3 id="제네릭-타입">제네릭 타입</h3>

<h4 id="typevar">TypeVar</h4>

<p>Java의 Generic Type과 같이 타입을 미리 정해주지 않고, 그때 그때 필요한 타입이 지정될 수 있도록 할 수 있습니다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">typing</span> <span class="kn">import</span> <span class="n">TypeVar</span>

<span class="n">T</span> <span class="o">=</span> <span class="nc">TypeVar</span><span class="p">(</span><span class="s">'T'</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">temp</span><span class="p">(</span><span class="n">var</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
  <span class="k">return</span> <span class="n">var</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="nf">print</span><span class="p">(</span><span class="nf">temp</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nf">print</span><span class="p">(</span><span class="nf">temp</span><span class="p">([</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">]))</span>
<span class="mi">1</span>
<span class="n">a</span>
</code></pre></div></div>

<h3 id="named-tuple">Named Tuple</h3>

<p>마치 Dict 타입 객체처럼 튜플에 key 값을 줄 수 있습니다. class형 문법으로서 사용성과 가독성도 향상 되었습니다. 또한 default 값을 줌으로서 객체를 상속받아 사용할 수 있습니다!</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">typing</span> <span class="kn">import</span> <span class="n">NamedTuple</span>

<span class="k">class</span> <span class="nc">Student</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
  <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
  <span class="n">age</span><span class="p">:</span> <span class="nb">int</span>
  <span class="n">graduated</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span>

<span class="n">tommy</span> <span class="o">=</span> <span class="nc">Student</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Tommy'</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">26</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">tommy</span>
<span class="nc">Student</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Tommy'</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">26</span><span class="p">,</span> <span class="n">graduated</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</code></pre></div></div>

</body></html>
