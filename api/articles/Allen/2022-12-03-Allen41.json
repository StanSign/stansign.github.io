{"title":"41)🧰 Swift - 네트워크 통신.02","uid":"6c682199b51a2e4376ed412751ae3d24","slug":"Allen/2022-12-03-Allen41","date":"2022-12-02T15:00:00.000Z","updated":"2023-03-31T10:35:26.023Z","comments":true,"path":"api/articles/Allen/2022-12-03-Allen41.json","keywords":null,"cover":null,"content":"<p><a href=\"https://www.inflearn.com/course/%EC%8A%A4%EC%9C%84%ED%94%84%ED%8A%B8-%EB%AC%B8%EB%B2%95-%EB%A7%88%EC%8A%A4%ED%84%B0-%EC%8A%A4%EC%BF%A8\">앨런 Swift문법 마스터 스쿨 (온라인 BootCamp - 2개월과정)</a></p>\n<h1 id=\"iOS에서의-네트워크-통신\"><a href=\"#iOS에서의-네트워크-통신\" class=\"headerlink\" title=\"iOS에서의 네트워크 통신\"></a>iOS에서의 네트워크 통신</h1><pre class=\"line-numbers language-Swift\" data-language=\"Swift\"><code class=\"language-Swift\">let movieURL &#x3D; &quot;https:&#x2F;&#x2F;kobis.or.kr&#x2F;kobisopenapi&#x2F;webservice&#x2F;rest&#x2F;boxoffice&#x2F;searchDailyBoxOfficeList.json&quot;\nlet structURL &#x3D; URL(string: movieURL)!\nURLSession.shared.dataTask(with: structURL) &#123; data, response, error in\n\tif error !&#x3D; nil &#123; &#x2F;&#x2F; 에러 체크\n\t\tprint(error?.localizedDescription)\n\t\treturn\n\t&#125;\n\tguard let safeData &#x3D; data else &#123;\n\t\treturn\n\t&#125;\n\tdump(parseJSON(safeData))\n&#125;.resume()<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"iOS의-네트워킹\"><a href=\"#iOS의-네트워킹\" class=\"headerlink\" title=\"iOS의 네트워킹\"></a>iOS의 네트워킹</h2><h3 id=\"1-iOS-데이터-요청의-4단계\"><a href=\"#1-iOS-데이터-요청의-4단계\" class=\"headerlink\" title=\"1) iOS 데이터 요청의 4단계\"></a>1) iOS 데이터 요청의 4단계</h3><p>웹 브라우저로 하는 통신에 대입해봅시다.</p>\n<ol>\n<li>URL 구조체</li>\n<li>URLSession<ul>\n<li>웹 브라우저 실행</li>\n</ul>\n</li>\n<li>dataTask<ul>\n<li>url 입력</li>\n</ul>\n</li>\n<li>시작 (resume)<ul>\n<li>Enter</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"2-Data-x2F-JSON-타입의-응답\"><a href=\"#2-Data-x2F-JSON-타입의-응답\" class=\"headerlink\" title=\"2) Data &#x2F; JSON 타입의 응답\"></a>2) Data &#x2F; JSON 타입의 응답</h3><pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"John\"</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token property\">\"age\"</span><span class=\"token operator\">:</span> <span class=\"token number\">22</span>\n\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Mary\"</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token property\">\"age\"</span><span class=\"token operator\">:</span> <span class=\"token number\">20</span>\n\t<span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">]</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"3-실제-사용-타입으로-변환\"><a href=\"#3-실제-사용-타입으로-변환\" class=\"headerlink\" title=\"3) 실제 사용 타입으로 변환\"></a>3) 실제 사용 타입으로 변환</h3><p><code>Data</code>나 <code>json</code> 타입의 데이터를 그대로 사용할 수는 없으니 Swift에서 평소에 사용하던 <code>struct</code>나 <code>class</code> 타입으로 변환하는 과정이 필요합니다.</p>\n<p>이 과정을 JSON Parsing이라고 부르고, Swift는 이 파싱을 위한 <code>Codable</code> 프로토콜을 지원합니다.</p>\n<pre class=\"line-numbers language-Swift\" data-language=\"Swift\"><code class=\"language-Swift\">struct MovieData: Codable &#123;\n\tlet boxOfficeResult: BoxOfficeResult\n&#125;\n\nstruct BoxOfficeResult: Codable &#123;\n\tlet dailyBoxOfficeList: [DailyBoxOfficeList]\n&#125;\n\nstruct DailyBoxOfficeList: Codable &#123;\n\tlet rank: String\n\tlet movieNm: String\n\tlet audiCnt: String\n\tlet audiAcc: String\n\tlet openDt: String\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<pre class=\"line-numbers language-Swift\" data-language=\"Swift\"><code class=\"language-Swift\">func pareJSON(_ movieData: Data) -&gt; [DailyBoxOfficeList]? &#123;\n\tdo &#123;\n\t\tlet decoder &#x3D; JSONDecoder()\n\t\tlet decodedData &#x3D; try decoder.decode(MovieData.self, from: movieData)\n\t\treturn decodedData.boxOfficeResult.dailyBoxOfficeList\n\t&#125; catch &#123;\n\t\treturn nil\n\t&#125;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>여기서 핵심은</p>\n<p><code>try decoder.decode(MovieData.self, from: movieData)</code></p>\n<p>이 부분입니다.</p>\n<p>만들어둔 <code>MovieData</code>라는 구조체의 형식에 맞게 <code>movieData</code>를 <code>JSONDecoder</code>를 사용해서 변환하겠다는 의미입니다.</p>\n<p><code>Codable</code>을 붙여둔 구조체의 형식이 데이터와 맞다면, 자동으로 <code>json</code> 데이터를 변환하여 함수의 리턴 타입인 <code>[DailyBoxOfficeList]?</code>의 형태로 받아올 수 있습니다.</p>\n<h4 id=\"Codable\"><a href=\"#Codable\" class=\"headerlink\" title=\"Codable\"></a>Codable</h4><p><code>Codable</code>은 <code>Encodable</code>과 <code>Decodable</code>을 통합한 프로토콜입니다.</p>\n<ul>\n<li><code>Encodable</code>: 데이터 ➡️ 클래스, 구조체</li>\n<li><code>Decodable</code>: 클래스, 구조체 ➡️ 데이터</li>\n</ul>\n","text":"앨런 Swift문법 마스터 스쿨 (온라인 BootCamp - 2개월과정) iOS에서의 네트워크 통신let movieURL &#x3D; &quot;https:&#x2F;&#x2F;kobis.or.kr&#x2F;kobisopenapi&#x2F;webser...","link":"","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"AllenBootCamp","slug":"AllenBootCamp","count":45,"path":"api/categories/AllenBootCamp.json"}],"tags":[{"name":"Swift","slug":"Swift","count":75,"path":"api/tags/Swift.json"},{"name":"iOS","slug":"iOS","count":75,"path":"api/tags/iOS.json"},{"name":"Allen","slug":"Allen","count":45,"path":"api/tags/Allen.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#iOS%EC%97%90%EC%84%9C%EC%9D%98-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%ED%86%B5%EC%8B%A0\"><span class=\"toc-text\">iOS에서의 네트워크 통신</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#iOS%EC%9D%98-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%82%B9\"><span class=\"toc-text\">iOS의 네트워킹</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-iOS-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9A%94%EC%B2%AD%EC%9D%98-4%EB%8B%A8%EA%B3%84\"><span class=\"toc-text\">1) iOS 데이터 요청의 4단계</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-Data-x2F-JSON-%ED%83%80%EC%9E%85%EC%9D%98-%EC%9D%91%EB%8B%B5\"><span class=\"toc-text\">2) Data &#x2F; JSON 타입의 응답</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%EC%8B%A4%EC%A0%9C-%EC%82%AC%EC%9A%A9-%ED%83%80%EC%9E%85%EC%9C%BC%EB%A1%9C-%EB%B3%80%ED%99%98\"><span class=\"toc-text\">3) 실제 사용 타입으로 변환</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Codable\"><span class=\"toc-text\">Codable</span></a></li></ol></li></ol></li></ol></li></ol>","author":{"name":"nomatterjun","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/60438045?v=4","link":"/","description":"안녕하세요 👋 <br/> 바쁜 현대인들의 일상에 <br/> 작은 변화를 심고 싶은 개발자 <br/> 이창준입니다.","socials":{"github":"https://github.com/nomatterjun","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"instagram":{"icon":"/assets/instagram.svg","link":"https://www.instagram.com/nomatter_jun/"}}}},"mapped":true,"prev_post":{"title":"40)🧰 Swift - 네트워크 통신.01","uid":"1ca7fb6a95b8a418f4c9c554aca0e0f9","slug":"Allen/2022-12-03-Allen40","date":"2022-12-02T15:00:00.000Z","updated":"2023-03-31T10:35:22.054Z","comments":true,"path":"api/articles/Allen/2022-12-03-Allen40.json","keywords":null,"cover":null,"text":"앨런 Swift문법 마스터 스쿨 (온라인 BootCamp - 2개월과정) 네트워크 통신네트워킹TCP&#x2F;IP 인터넷에 관련된 다양한 프로토콜 집합의 총칭 프로토콜: 통신을 하기 위해 마련해둔 약속 HTTP, IP, FTP, UDP, TCP, IE...","link":"","photos":[],"count_time":{"symbolsCount":"3.1k","symbolsTime":"3 mins."},"categories":[{"name":"AllenBootCamp","slug":"AllenBootCamp","count":45,"path":"api/categories/AllenBootCamp.json"}],"tags":[{"name":"Swift","slug":"Swift","count":75,"path":"api/tags/Swift.json"},{"name":"iOS","slug":"iOS","count":75,"path":"api/tags/iOS.json"},{"name":"Allen","slug":"Allen","count":45,"path":"api/tags/Allen.json"}],"author":{"name":"nomatterjun","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/60438045?v=4","link":"/","description":"안녕하세요 👋 <br/> 바쁜 현대인들의 일상에 <br/> 작은 변화를 심고 싶은 개발자 <br/> 이창준입니다.","socials":{"github":"https://github.com/nomatterjun","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"instagram":{"icon":"/assets/instagram.svg","link":"https://www.instagram.com/nomatter_jun/"}}}}},"next_post":{"title":"38)🧰 Swift - 에러 처리","uid":"ce2e6e038e6cdd39ed0992f2d4217d3d","slug":"Allen/2022-12-02-Allen38","date":"2022-12-01T15:00:00.000Z","updated":"2023-03-31T10:35:08.322Z","comments":true,"path":"api/articles/Allen/2022-12-02-Allen38.json","keywords":null,"cover":null,"text":"앨런 Swift문법 마스터 스쿨 (온라인 BootCamp - 2개월과정) 에러에러의 종류 컴파일 에러 코드가 잘못되었음을 알려주는 문법적 오류 런타임 에러 여러가지 이유로 앱이 실행되는 동안 발생하는 오류 미리 발생 가능한 에러에 대응할 필요가 있다 ...","link":"","photos":[],"count_time":{"symbolsCount":"4.2k","symbolsTime":"4 mins."},"categories":[{"name":"AllenBootCamp","slug":"AllenBootCamp","count":45,"path":"api/categories/AllenBootCamp.json"}],"tags":[{"name":"Swift","slug":"Swift","count":75,"path":"api/tags/Swift.json"},{"name":"iOS","slug":"iOS","count":75,"path":"api/tags/iOS.json"},{"name":"Allen","slug":"Allen","count":45,"path":"api/tags/Allen.json"}],"author":{"name":"nomatterjun","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/60438045?v=4","link":"/","description":"안녕하세요 👋 <br/> 바쁜 현대인들의 일상에 <br/> 작은 변화를 심고 싶은 개발자 <br/> 이창준입니다.","socials":{"github":"https://github.com/nomatterjun","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"instagram":{"icon":"/assets/instagram.svg","link":"https://www.instagram.com/nomatter_jun/"}}}}}}